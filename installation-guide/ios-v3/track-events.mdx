---
title: "Track Customer Events"
description: "Send events to power actions, campaigns and rewards"
---

# Track Customer Events

Send events to Gameball to power actions, campaigns and rewards. Events represent significant customer actions within your app.

<CodeGroup>
```swift Swift
import Gameball

let event = GameballEvent(
    customerId: "customer-123",
    email: "john@example.com",
    mobile: "+1234567890"
)

event.addEvent(
    name: "purchase",
    metadata: [
        "product_id": "12345",
        "amount": 99.99,
        "currency": "USD",
        "category": "electronics"
    ]
)

Gameball.shared.sendEvent(event) { result in
    switch result {
    case .success:
        print("Event sent successfully")
    case .failure(let error):
        print("Error: \(error.localizedDescription)")
    }
}
```

```swift Swift (Async/Await)
import Gameball

Task {
    do {
        let event = GameballEvent(customerId: "customer-123")
        
        event.addEvent(
            name: "purchase",
            metadata: [
                "product_id": "12345",
                "amount": 99.99,
                "currency": "USD"
            ]
        )
        
        try await Gameball.shared.sendEvent(event)
        print("Event sent successfully")
    } catch {
        print("Error: \(error.localizedDescription)")
    }
}
```
</CodeGroup>

## Event Parameters

<ParamField body="customerId" type="String" required>
The unique identifier of the customer performing the event.
</ParamField>

<ParamField body="email" type="String">
Customer's email address.
</ParamField>

<ParamField body="mobile" type="String">
Customer's mobile number.
</ParamField>

<ParamField body="eventName" type="String" required>
The name of the event (e.g., "purchase", "review", "add_to_cart").
</ParamField>

<ParamField body="metadata" type="[String: Any]">
Additional metadata about the event. Can include product details, amounts, categories, etc.
</ParamField>

### Validation Rules

**Event requires:**
- Customer ID cannot be empty
- Event name must be set before adding metadata
- At least one event must be added
- Metadata values can be String, Number, Boolean, or nested dictionaries

## Best Practices

<Steps>
<Step title="Use Clear Event Names">
Make event names human-readable and consistent (e.g., `purchase_completed`, `review_submitted`).
</Step>

<Step title="Send After Action Completion">
Send events when an action is fully completed (e.g., after payment confirmation for purchases).
</Step>

<Step title="Include Relevant Metadata">
Add metadata that will be useful for segmentation and campaign targeting.
</Step>

<Step title="Keep Keys Consistent">
Use consistent metadata keys across similar events (e.g., always use `amount` not sometimes `price`).
</Step>
</Steps>

## Common Event Examples

### Purchase Event

```swift
let purchaseEvent = GameballEvent(customerId: "customer-123")

purchaseEvent.addEvent(
    name: "purchase_completed",
    metadata: [
        "order_id": "ORD-12345",
        "amount": 149.99,
        "currency": "USD",
        "category": "electronics"
    ]
)

Gameball.shared.sendEvent(purchaseEvent) { result in
    // Handle result
}
```

### Review Event

```swift
let reviewEvent = GameballEvent(customerId: "customer-123")

reviewEvent.addEvent(
    name: "review_submitted",
    metadata: [
        "product_id": "PROD-789",
        "rating": 5
    ]
)

Gameball.shared.sendEvent(reviewEvent) { result in
    // Handle result
}
```

### Add to Cart Event

```swift
let cartEvent = GameballEvent(customerId: "customer-123")

cartEvent.addEvent(
    name: "add_to_cart",
    metadata: [
        "product_id": "PROD-456",
        "quantity": 2
    ]
)

Gameball.shared.sendEvent(cartEvent) { result in
    // Handle result
}
```

### Multiple Events

You can send multiple events in a single call:

```swift
let multipleEvents = GameballEvent(customerId: "customer-123")

multipleEvents.addEvent(
    name: "page_view",
    metadata: [
        "page": "product_detail",
        "product_id": "PROD-123"
    ]
)

multipleEvents.addEvent(
    name: "add_to_cart",
    metadata: [
        "product_id": "PROD-123",
        "quantity": 1
    ]
)

Gameball.shared.sendEvent(multipleEvents) { result in
    // Handle result
}
```

## Error Handling

```swift
Gameball.shared.sendEvent(event) { result in
    switch result {
    case .success:
        print("Event tracked successfully")
    case .failure(let error):
        if let gameballError = error as? GameballError {
            switch gameballError {
            case .networkError:
                print("Network error occurred")
            case .authenticationError:
                print("Authentication failed")
            case .invalidRequest:
                print("Invalid request")
            default:
                print("Error: \(gameballError.localizedDescription)")
            }
        } else {
            print("Unknown error: \(error.localizedDescription)")
        }
    }
}
```

## Using Async/Await with Error Handling

```swift
func trackPurchase(customerId: String, amount: Double) async {
    do {
        let event = GameballEvent(customerId: customerId)
        
        event.addEvent(
            name: "purchase",
            metadata: [
                "amount": amount,
                "currency": "USD"
            ]
        )
        
        try await Gameball.shared.sendEvent(event)
        print("Purchase tracked successfully")
    } catch let error as GameballError {
        handleGameballError(error)
    } catch {
        print("Unexpected error: \(error.localizedDescription)")
    }
}

func handleGameballError(_ error: GameballError) {
    switch error {
    case .networkError:
        // Show network error to user
        break
    case .authenticationError:
        // Handle authentication
        break
    case .invalidRequest:
        // Log invalid request
        break
    default:
        // Handle other errors
        break
    }
}
```

<Info>
Events are the foundation of Gameball's reward and engagement system. Configure how events trigger rewards and actions in your Gameball dashboard.
</Info>

## Next Steps

- [Track Orders & Cashback](/installation-guide/ios-v3/track-orders)
- [Show Profile Widget](/installation-guide/ios-v3/show-profile)
- [Integrate Redemption](/installation-guide/ios-v3/integrate-redemption)


