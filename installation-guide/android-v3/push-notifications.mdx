---
title: "Push Notifications"
description: "Set up Firebase or Huawei push notifications"
---

# Push Notifications (In-app & Push)

Gameball supports push notifications through Firebase Cloud Messaging (FCM) and Huawei Push Kit, allowing you to engage customers with timely updates about rewards, achievements, and promotions.

## Firebase Cloud Messaging (FCM)

### Setup

1. Add Firebase to your Android project following [Firebase setup guide](https://firebase.google.com/docs/android/setup)
2. Add FCM dependency to your `build.gradle`:

```groovy
dependencies {
    implementation platform('com.google.firebase:firebase-bom:32.0.0')
    implementation 'com.google.firebase:firebase-messaging'
}
```

3. Configure Firebase credentials in your Gameball dashboard

### Get Device Token

```kotlin
FirebaseMessaging.getInstance().token.addOnCompleteListener { task ->
    if (task.isSuccessful) {
        val token = task.result
        
        // Provide token during customer initialization
        val customerRequest = InitializeCustomerRequest.builder()
            .customerId("customer-123")
            .deviceToken(token)
            .pushProvider(PushProvider.Firebase)
            .build()
            
        GameballApp.getInstance(context).initializeCustomer(
            customerRequest,
            callback
        )
    }
}
```

### Handle Notifications

Create a service extending `FirebaseMessagingService`:

```kotlin
class MyFirebaseMessagingService : FirebaseMessagingService() {
    
    override fun onMessageReceived(remoteMessage: RemoteMessage) {
        super.onMessageReceived(remoteMessage)
        
        // Check if message is from Gameball
        if (remoteMessage.data["source"] == "gameball") {
            // Handle Gameball notification
            val title = remoteMessage.notification?.title
            val body = remoteMessage.notification?.body
            
            // Show notification to user
            showNotification(title, body)
        }
    }
    
    override fun onNewToken(token: String) {
        super.onNewToken(token)
        
        // Update token with Gameball
        updateDeviceToken(token)
    }
}
```

Register the service in `AndroidManifest.xml`:

```xml
<service
    android:name=".MyFirebaseMessagingService"
    android:exported="false">
    <intent-filter>
        <action android:name="com.google.firebase.MESSAGING_EVENT" />
    </intent-filter>
</service>
```

## Huawei Push Kit

For apps targeting Huawei devices without Google Play Services:

### Setup

1. Configure Huawei Push Kit in AppGallery Connect
2. Add Huawei Push dependency:

```groovy
dependencies {
    implementation 'com.huawei.hms:push:6.7.0.300'
}
```

3. Add Huawei repository:

```groovy
repositories {
    maven { url 'https://developer.huawei.com/repo/' }
}
```

### Get Device Token

```kotlin
object : HmsMessageService() {
    override fun onNewToken(token: String) {
        // Provide token during customer initialization
        val customerRequest = InitializeCustomerRequest.builder()
            .customerId("customer-123")
            .deviceToken(token)
            .pushProvider(PushProvider.Huawei)
            .build()
    }
}
```

<Info>
Follow these guides for detailed Huawei integration:
- [Configuring App Information in AppGallery Connect](https://developer.huawei.com/consumer/en/doc/hmscore-guides/android-config-agc-0000001050170137)
- [Pushkit Codelab](https://developer.huawei.com/consumer/en/codelab/HMSPushKit/index.html#0)
</Info>

## In-App Messages

The SDK supports in-app message display through:

- Profile widget popups
- Native in-app notifications
- Custom message templates

Configure message templates and campaign rules from the Gameball dashboard.

## Best Practices

<Steps>
<Step title="Request Permissions">
Request notification permissions from users at an appropriate time.
</Step>

<Step title="Handle Token Refresh">
Always update the device token when it changes or refreshes.
</Step>

<Step title="Test Notifications">
Test push notifications on different devices and Android versions.
</Step>

<Step title="Provide Value">
Only send relevant, valuable notifications to maintain user engagement.
</Step>
</Steps>

## Next Steps

- [Track Referrals](/installation-guide/android-v3/track-referrals)
- [Go-Live Checklist](/installation-guide/android-v3/go-live-checklist)

